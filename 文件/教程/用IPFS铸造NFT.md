æ ‡é¢˜|ç®€ä»‹
|---|---|
ä½¿ç”¨IPFSé“¸é€ NFT|éåŒè´¨åŒ–ä»£å¸ï¼ˆNFTï¼‰å…è®¸ç”¨æˆ·åˆ›é€ å’Œäº¤æ˜“ä¸åŒä»·å€¼çš„æ•°å­—èµ„äº§ã€‚ä»é›¶å¼€å§‹å­¦ä¹ å¦‚ä½•é“¸é€ ä¸€ä¸ªNFTå¹¶ä¸”æŠŠå®ƒå‚¨å­˜åœ¨IPFSï¼Œå¹¶ä¸”å­¦ä¹ å¦‚ä½•ä½¿ç”¨Pinataçš„è¿œç¨‹é”å®šæœåŠ¡ã€‚  

# ä½¿ç”¨IPSFSé“¸é€ NFT  

éåŒè´¨åŒ–ä»£å¸ï¼ˆNFTï¼‰å…è®¸ç”¨æˆ·åˆ›é€ å’Œäº¤æ˜“ä¸åŒä»·å€¼çš„æ•°å­—èµ„äº§ã€‚ä»é›¶å¼€å§‹å­¦ä¹ å¦‚ä½•é“¸é€ ä¸€ä¸ªNFTå¹¶ä¸”åœ¨è¿œç¨‹é”å®šæœåŠ¡ï¼Œåƒæ˜¯Pinataå’Œnft.storageçš„å¸®åŠ©ä¸‹æŠŠå®ƒå‚¨å­˜åœ¨IPFSã€‚  

ç”±äºIPFSå¹¶ä¸æ˜¯ä¸€ä¸ªåŒºå—é“¾ï¼Œæˆ‘ä»¬ä¼šåœ¨è¿™ä¸ªæ•™ç¨‹ä½¿ç”¨ä»¥å¤ªåŠã€‚ä½†æ˜¯ä¸ä»…ä»…æ˜¯ä»¥å¤ªåŠï¼Œæˆ‘ä»¬ä¹Ÿèƒ½æŠŠæœ¬æ¬¡çš„æ•™ç¨‹è½»æ¾å¥—ç”¨åœ¨åˆ«çš„åŒºå—é“¾ä¸Šã€‚  

## NFTç®€ä»‹  

æœ¬æ¬¡æ•™ç¨‹ä¸ä¼šæ·±å…¥è®²è§£NFTæˆ–è€…è®¨è®ºå…¶é‡è¦æ€§å’Œæ½œèƒ½ã€‚æœ¬æ¬¡æ•™ç¨‹ä»…ä»…æ˜¯å¸®åŠ©ä½ å­¦ä¹ å¦‚ä½•ä½¿ç”¨IPFSæ‰˜ç®¡ä½ çš„NFTï¼Œå¹¶ä¸”äº†è§£è¿™ä¸ªè¿‡ç¨‹æ˜¯å¦‚ä½•æ‰©å±•è‡³åŒºå—é“¾å¼€å‘çš„å…¶å®ƒæ–¹é¢ã€‚  

å› æ­¤ï¼Œæˆ‘ä»¬ä¼šå°è¯•æ¦‚å†µæœ€åŸºæœ¬çš„NFTçŸ¥è¯†ï¼Œä»¥ç¡®ä¿å¤§å®¶æ˜¯åœ¨åŒä¸€ä¸ªé¢‘é“ä¸Šã€‚å¦‚æœä½ æƒ³å­¦ä¹ æ›´å¤šå…³äºåˆ›é€ NFTçš„æœ€ä½³å®è·µå’Œå¼€å‘è¿‡ç¨‹ï¼Œå¯ä»¥å‰å¾€[NFT School](https://nftschool.dev)ã€‚  

### NFTæ˜¯å¦‚ä½•ç»„æˆçš„   

ä¸è®ºæ˜¯ä»€ä¹ˆå¹³å°ï¼ŒNFTæ‹¥æœ‰ç€å‡ ä¸ªå…³é”®ç‰¹å¾ã€‚  

é¦–å…ˆï¼Œæ¯ä¸ªéåŒè´¨åŒ–ä»£å¸æ‹¥æœ‰è‡ªå·±ç‹¬ä¸€æ— äºŒçš„ç¼–å·ï¼Œç”¨äºåœ¨å…¶ä»–ä»£å¸ä¹‹é—´åŒºåˆ«è‡ªå·±ã€‚è¿™è·ŸåŒè´¨åŒ–ä»£å¸æœ‰éå¸¸é²œæ˜çš„å¯¹æ¯”ï¼Œåƒæ˜¯ä»¥å¤ª `ETH`ï¼Œä»¥ä¸€ä¸ªæ•°é‡å­˜åœ¨äºæˆ·å£æˆ–è€…é’±åŒ…ã€‚æˆ‘ä»¬ä¸èƒ½åŒºåˆ«æ¯ä¸ª`ETH`ã€‚æ­£å› ä¸ºNFTæ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œå®ƒä»¬æ˜¯è¢«ç‹¬ç«‹äº¤æ˜“å’Œç‹¬ç«‹æ‹¥æœ‰çš„ï¼Œè€Œæ™ºèƒ½åˆçº¦è´Ÿè´£è¿½è¸ªæ˜¯è°æ‹¥æœ‰è¿™äº›NFTã€‚  

å¦ä¸€ä¸ªNFTçš„å…³é”®ç‰¹å¾æ˜¯å®ƒå¯ä»¥äºå‚¨å­˜åœ¨æ™ºèƒ½åˆçº¦å¤–çš„æ•°æ®åšé“¾æ¥ã€‚å‚¨å­˜å¹¶ä¸”å¤„ç†æ™ºèƒ½åˆçº¦å¤–çš„æ•°æ®æˆ‘ä»¬ç§°ä¹‹ä¸º _é“¾ä¸‹_ï¼ˆoff-chainï¼‰ã€‚è¿™æ˜¯å› ä¸ºå‡¡æ˜¯å‚¨å­˜åœ¨é“¾ä¸Šçš„æ•°æ®éƒ½éœ€è¦è¢«å¤„ç†ï¼ŒéªŒè¯ï¼Œå’Œå¹¿æ’­åˆ°æ•´ä¸ªåŒºå—é“¾ç½‘ç»œï¼Œå¯¼è‡´å‚¨å­˜å·¨å¤§çš„æ•°æ®æ˜¯éå¸¸æ˜‚è´µçš„ã€‚NFTçš„åº”ç”¨å°±å­˜åœ¨äº†è¿™ä¸ªé—®é¢˜ï¼Œå°¤å…¶æ˜¯å½“NFTä»£è¡¨ç€ä¸€äº›è‰ºæœ¯ç”»ä½œå’Œæ”¶è—å“ï¼Œé‚£ä¹ˆä¿å­˜å®ƒä»¬å¯ä»¥èŠ±è´¹ä¸Šç™¾ä¸‡ç¾é‡‘ã€‚  

### IPFSå¦‚ä½•è§£å†³é—®é¢˜  

å½“åˆ›å»ºNFTå¹¶å°†å…¶é“¾æ¥åˆ°å­˜åœ¨äºå…¶ä»–ç³»ç»Ÿä¸Šçš„æ•°å­—èµ„äº§æ—¶ï¼Œé‚£ä¹ˆé“¾æ¥æ•°æ®çš„æ–¹å¼å°±éå¸¸çš„å…³é”®ã€‚æœ‰å‡ ä¸ªåŸå› å¯¼è‡´äº†ä¼ ç»Ÿçš„HTTPé“¾æ¥å¹¶ä¸é€‚åˆåº”ç”¨ã€‚  

ä¾‹å¦‚åƒè¿™æ ·çš„HTTPåœ°å€ `https://cloud-bucket.provider.com/my-nft.jpeg`ï¼Œåªè¦æœåŠ¡å™¨çš„ä¸»äººæ”¯ä»˜è´¦å•ï¼Œä»»ä½•äººéƒ½å¯ä»¥è·å– `my-nft.jpeg` çš„å†…å®¹ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬æ°¸è¿œæ— æ³•ä¿è¯ `my-nft.jpeg` çš„å†…å®¹ä¸åˆ›å»ºNFTæ—¶çš„å†…å®¹æ˜¯ç›¸åŒçš„ã€‚é‚£æ˜¯å› ä¸ºï¼ŒæœåŠ¡å™¨çš„ä¸»äººå¯ä»¥éšæ—¶å°† `my-nft.jpeg` æ›¿æ¢ä¸ºå®Œå…¨ä¸åŒçš„å›¾åƒï¼Œä»è€Œå¯¼è‡´NFTå¤±å»äº†åŸæœ‰æ‰€ä»£è¡¨çš„å«ä¹‰ã€‚  

è¿™ç§ç§°ä¸ºâ€œè·‘è·¯â€çš„äº‹ä»¶ä¹Ÿæ›¾ç»å‘ç”Ÿè¿‡ã€‚ä¸€åç”»å®¶åˆ›å»ºäº†è‡ªå·±çš„NFTså¹¶ä¸”å–å‡ºåï¼Œå°±æŠŠåŸæœ¬çš„å›¾åƒè¿›è¡Œæ›¿æ¢ï¼Œå†æŠŠåŸå›¾å–ç»™å…¶ä»–äººã€‚  

IPFSé€šè¿‡å†…å®¹å¯»å€æŠ€æœ¯è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚å½“ä½ æŠŠæ•°æ®ä¿å­˜åˆ°IPFSï¼ŒIPFSä¼šåŸºäºä½ çš„æ•°æ®å†…å®¹ç”Ÿæˆä¸€ä¸ªå†…å®¹æ ‡è¯†ï¼ˆcontent identifier: CIDï¼‰ï¼Œè€Œå†…å®¹æ ‡è¯†æ˜¯é“¾æ¥åˆ°ä½ åˆšä¸Šä¼ åˆ°IPFSçš„æ•°æ®ã€‚ç”±äºæ¯ä¸ªCIDåªèƒ½æŒ‡å‘ä¸€ä¸ªå†…å®¹ï¼Œå¹¶ä¸”æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿä¸å¿…å®³æ€•å†…å®¹è¢«æ›¿æ¢æˆ–è€…ç¯¡æ”¹ã€‚  

å½“ä½ ä½¿ç”¨CIDï¼Œå³ä½¿åŸè‘—æ¶ˆå¤±äº†ï¼Œåªè¦IPFSç½‘ç»œä¸Šå­˜åœ¨ç€è‡³å°‘ä¸€ä»½ä½ æƒ³è¦çš„æ•°æ®ï¼Œä½ éƒ½èƒ½æˆåŠŸè·å–è¿™ä»½æ•°æ®ã€‚è¿™ä½¿å¾—CIDséå¸¸é€‚åˆç”¨äºå‚¨å­˜NFTã€‚æˆ‘ä»¬éœ€è¦åšçš„å°±åªæ˜¯æŠŠCIDè¾“å…¥åœ¨ `ipfs://` çš„ç»Ÿä¸€èµ„æºæ ‡å¿—ç¬¦ï¼ˆURIï¼‰ï¼š`ipfs://bafybeidlkqhddsjrdue7y3dy27pu5d7ydyemcls4z24szlyik3we7vqvam/nft-image.png`ã€‚è¿™æ ·ï¼Œå°±æ‹¥æœ‰äº†ä¸€ä¸ªä»åŒºå—é“¾è‡³ä»£å¸æ•°æ®ä¹‹é—´æ— æ³•è¢«ç ´åçš„é“¾æ¥äº†ã€‚  

å½“ç„¶ï¼Œåœ¨æŸäº›æƒ…å†µä¹‹ä¸‹ï¼Œæˆ‘ä»¬ä¼šæƒ³è¦å†å‘å¸ƒäº†NFTåæ›´æ–°å…¶å…ƒæ•°æ®ã€‚è¿™å®Œå…¨åŠå¾—åˆ°ï¼ä½ åªéœ€è¦åœ¨æ™ºèƒ½åˆçº¦ä¸­æ·»åŠ ä¸€ä¸ªæœºåˆ¶ï¼Œé‚£å°±æ˜¯åœ¨æ¯æ¬¡æ›´æ–°ä»£å¸çš„æ•°æ®åè‡ªåŠ¨æ›´æ–°URIã€‚è¿™å°†è®©ä½ æ—§çš„IPFS URIæ›´æ”¹ä¸ºæ–°çš„URIï¼ŒåŒæ—¶åˆå§‹ç‰ˆæœ¬çš„è®°å½•ä»ç„¶åœ¨åŒºå—é“¾çš„äº¤æ˜“å†å²ä¸­ä¿ç•™ä¸‹æ¥ã€‚è¿™å¢åŠ äº†é€æ˜åº¦ï¼Œå¹¶è®©æ¯ä¸ªäººéƒ½æ¸…æ¥šçŸ¥é“æ›´æ”¹äº†ä»€ä¹ˆå†…å®¹ã€ä½•æ—¶ä»¥åŠç”±è°æ›´æ”¹ã€‚   

## Minty  

ä¸ºäº†æ›´æ–¹ä¾¿è®²è§£NFTså’ŒIPFSæ˜¯å¦‚ä½•äº’ç›¸é…åˆå’Œè¿ä½œçš„ï¼Œæˆ‘ä»¬å¼€å‘äº†Mintyã€‚Mintyæ˜¯ä¸€ä¸ªç®€å•çš„å‘½ä»¤è¡Œåº”ç”¨ç¨‹åºï¼Œèƒ½å¤Ÿè‡ªåŠ¨é“¸é€ NFTå¹¶åˆ©ç”¨[Estuary](https://estuary.tech/)ï¼Œ[nft.storage](https://nft.storage)ï¼Œæˆ–[Pinata](https://pinata.cloud)æŠŠå…¶æ•°æ®åœ¨IPFSè¿›è¡Œé”å®šã€‚  

NFTå¹³å°çš„è¿ä½œæ˜¯è¾ƒä¸ºå¤æ‚çš„ã€‚åœ¨å½“ä»Šçš„ç½‘ç»œåº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬éœ€è¦å›´ç»•åœ¨æˆ‘ä»¬é€‰æ‹©çš„æŠ€æœ¯æ ˆä¸Šåšä¸åŒçš„å†³å®šï¼Œç”¨æˆ·ç•Œé¢çš„è§„æ ¼ï¼ŒAPIçš„ç¤¾äº¤ç­‰ç­‰ã€‚é“¾æ¥åŒºå—é“¾çš„å»ä¸­å¿ƒåŒ–åº”ç”¨ç¨‹åºï¼ˆd-appsï¼‰è¿˜éœ€è¦å’Œç”¨æˆ·é’±åŒ…ï¼Œä¾‹å¦‚[Metamask](https://metamask.io)äº’åŠ¨ï¼Œå¤§å¤§å¢åŠ äº†å¼€å‘çš„å¤æ‚ç¨‹åº¦ã€‚  

ä½†æ—¢ç„¶Mintyçš„å‡ºç°æ˜¯è¦æ¼”ç¤ºä½¿ç”¨IPFSæ¥åˆ›å»ºNFTçš„æ¦‚å¿µå’Œè¿‡ç¨‹ï¼Œå› æ­¤æˆ‘ä»¬ä¸éœ€è¦ä¸“æ³¨äºç°ä»£å»ä¸­å¿ƒåŒ–åº”ç”¨ç¨‹åºçš„å¼€å‘ã€‚Mintyå°±åªæ˜¯ä¸€ä¸ªä½¿ç”¨Javascriptç¼–å†™çš„å‘½ä»¤è¡Œåº”ç”¨ç¨‹åºã€‚  

### ä¸‹è½½Minty  

è®©æˆ‘ä»¬ä¸€èµ·ä¸‹è½½Mintyï¼Œå¼€å§‹åŠ¨æ‰‹åˆ›å»ºNFTsï¼é¦–å…ˆï¼Œä½ å…ˆéœ€è¦ä¸‹è½½NPMï¼Œæ‰èƒ½ä¸‹è½½å¹¶ä¸”è¿è¡ŒMintyã€‚ç›®å‰Windowsç³»ç»Ÿæ˜¯ä¸æ”¯æŒçš„ã€‚ä¸‹è½½Mintyçš„æ–¹æ³•éå¸¸ç®€å•ã€‚ä½ åªéœ€è¦ä¸‹è½½å…¶Githubçš„ä»“åº“ï¼Œå†ä¸‹è½½NPM dependenciesï¼Œå°±èƒ½å¼€å§‹å¼€å¯æœ¬æœºçš„æµ‹è¯•ç¯å¢ƒã€‚ã€€ã€€

1. å¤åˆ¶Mintyçš„ä»“åº“ï¼Œå¹¶ä¸”è¿›å…¥å‘½åä¸º `minty` çš„ç›®å½•ï¼šã€€

   ```shell
   git clone https://github.com/yusefnapora/minty
   cd minty
   ```

2. ä¸‹è½½NPM dependenciesï¼š

    ```shell
    npm install
    ```

3. æ·»åŠ  `minty` å‘½ä»¤åˆ° `$PATH`ã€‚è¿™å¹¶ä¸æ˜¯å¿…é¡»åšçš„æ­¥éª¤ï¼Œä½†èƒ½è®©ä½ åœ¨ç”µè„‘çš„ä¸åŒè§’è½éƒ½èƒ½è¿è¡ŒMintyï¼š

    ```shell
    npm link
    ```

4. è¿è¡Œ `start-local-environment.sh` è„šæœ¬ï¼Œä»¥ä¾¿èƒ½å¼€å§‹è¿è¡Œä»¥å¤ªåŠçš„æœ¬æœºæµ‹è¯•ç½‘å’ŒIPFS daemonï¼š

    ```shell
    ./start-local-environment.sh
    > Compiling smart contract
    > Compiling 16 files with 0.7.3
    > ...
    ```

    è¿™ä¸ªæŒ‡ä»¤ä¼šä¸æ–­è¿è¡Œä¸‹å»ã€‚æ¥ä¸‹æ¥æ›´å¤šçš„å‘½ä»¤éƒ½éœ€è¦è¾“å…¥åˆ°æ–°çš„ç»ˆç«¯çª—å£ã€‚ã€€
    
### éƒ¨ç½²æ™ºèƒ½åˆçº¦

åœ¨è¿è¡Œä»»ä½•å…¶ä»–çš„ `minty` å‘½ä»¤ä¹‹å‰ï¼Œæ‚¨éœ€è¦éƒ¨ç½²ä¸€ä¸ªæ™ºèƒ½åˆçº¦ï¼šã€€ã€€

```shell
minty deploy
> deploying contract for token Julep (JLP) to network "localhost"...
> deployed contract for token Julep (JLP) to 0x5FbDB2315678afecb367f032d93F642f64180aa3 (network: localhost)
> Writing deployment info to minty-deployment.json
```

è¿™å°†éƒ¨ç½²åˆ° `hardhat.config.js` ä¸­é…ç½®çš„ç½‘ç»œï¼Œé»˜è®¤æƒ…å†µä¸‹è®¾ç½®ä¸º `localhost` ç½‘ç»œã€‚å¦‚æœæ‚¨æ”¶åˆ°æœ‰å…³æ— æ³•è®¿é—®ç½‘ç»œçš„æŠ¥é”™ï¼Œè¯·ç¡®ä¿ä½ ä½¿ç”¨ `./start-local-environment.sh` å¯åŠ¨äº†æœ¬æœºå¼€å‘ç½‘ç»œã€‚ã€€ã€€

éƒ¨ç½²æ­¤åˆçº¦æ—¶ï¼Œéƒ¨ç½²çš„åœ°å€å’Œå…¶ä»–ä¿¡æ¯å°†å†™å…¥`minty-deployment.json`ã€‚è¿™ä¸ªæ–‡ä»¶å¿…é¡»å­˜åœ¨ï¼Œæ‰èƒ½ä½¿åç»­å‘½ä»¤æ­£å¸¸è¿è¡Œã€‚

### é“¸é€ NFT

ä¸€æ—¦ä½ è¿è¡Œäº†æœ¬åœ°ä»¥å¤ªåŠç½‘ç»œå’ŒIPFS daemonï¼Œé“¸é€ NFTå°±å˜å¾—éå¸¸ç®€å•äº†ã€‚åªéœ€æŒ‡å®šä½ æƒ³è¦ä»£å¸åŒ–ï¼_tokenize_ çš„ä¸œè¥¿ï¼ŒNFTçš„åç§°ï¼Œç„¶åæ·»åŠ æè¿°ä»¥å‘Šè¯‰ç”¨æˆ·NFTçš„ç”¨é€”ã€‚ã€€ã€€

#### å‡†å¤‡ç”¨äºé“¸é€ çš„ç´ æã€€

é¦–å…ˆï¼Œæˆ‘ä»¬æ¥å‡†å¤‡ç”¨äºé“¸é€ NFTçš„ç´ æã€‚NFTsæœ‰éå¸¸å¹¿æ³›çš„åº”ç”¨åœºæ™¯ï¼Œä½ å¯ä»¥é€‰æ‹©ä»»ä½•ä¸œè¥¿ç”¨äºé“¸é€ ï¼ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬æ¥é“¸é€ ä¸€å¼ åŒå¾€æœˆçƒçš„æœºç¥¨ï¼ã€€ã€€

1. åˆ›å»ºä¸€ä¸ªå‘½åä¸º `flight-to-the-moon.txt`ã€€çš„æ–‡ä»¶ï¼š

    ```shell
    touch ~/flight-to-the-moon.txt
    ```

2. å¼€å¯æ–‡ä»¶ï¼Œè¾“å…¥ä¸€äº›æœºç¥¨çš„ä¿¡æ¯ï¼š

    ```
    THE INTERPLANETARY TRAVEL COMPANY
    ---------------------------------
    Departing: Cape Canaveral, Earth
    Arriving: Base 314, The Moon
    Boarding time: 17:30 UTC
    Seat number: 1A
    Baggage allowance: 5kg 
    ```

3. ä¿å­˜ï¼Œå…³é—­æ–‡ä»¶ã€‚

#### é“¸é€ æ–‡ä»¶  

ç°åœ¨æˆ‘ä»¬è¦ä»£å¸åŒ–æˆ‘ä»¬çš„NFTæœºç¥¨ã€‚è¿™ä¸ªè¿‡ç¨‹æˆ‘ä»¬ç§°ä¹‹ä¸ºé“¸é€ ã€‚ã€€

1. å‘¼å« `mint` å‘½ä»¤ï¼Œæä¾›æˆ‘ä»¬æƒ³è¦é“¸é€ çš„æ–‡ä»¶ï¼ŒNFTåç§°å’Œæè¿°ï¼š 

   ```shell 
    minty mint ~/flight-to-the-moon.txt --name "Moon Flight #1" --description "This ticket serves as proof-of-ownership of a first-class seat on a flight to the      moon."
    > ğŸŒ¿ Minted a new NFT:
    > Token ID:              1
    > Metadata URI:          ipfs://bafybeic3ui4dj5dzsvqeiqbxjgg3fjmfmiinb3iyd2trixj2voe4jtefgq/metadata.json
    > Metadata Gateway URL:  http://localhost:8080/ipfs/bafybeic3ui4dj5dzsvqeiqbxjgg3fjmfmiinb3iyd2trixj2voe4jtefgq/metadata.json
    > Asset URI:             ipfs://bafybeihhii26gwp4w7b7w7d57nuuqeexau4pnnhrmckikaukjuei2dl3fq/flight-to-the-moon.txt
    > Asset Gateway URL:     http://localhost:8080/ipfs/bafybeihhii26gwp4w7b7w7d57nuuqeexau4pnnhrmckikaukjuei2dl3fq/flight-to-the-moon.txt
    > NFT Metadata:
    > {
    >   "name": "Moon Flight #1",
    >   "description": "This ticket serves as proof-of-ownership of a first-class seat on a flight to the moon.",
    >   "image": "ipfs://bafybeihhii26gwp4w7b7w7d57nuuqeexau4pnnhrmckikaukjuei2dl3fq/flight-to-the-moon.txt"
    > }
    ``` 
      `minty mint`å‘½ä»¤è¿”å›äº†æ–°é“¸é€ ä»£å¸çš„idï¼Œä¸€äº›æˆ‘ä»¬æ‰€æä¾›çš„å…ƒæ•°æ®ï¼ˆåŒ…å«äº† `name` å’Œ `description`ï¼‰ï¼Œå’ŒæŒ‡å‘åŒ…å«äº†æˆ‘ä»¬NFTçš„æ–‡ä»¶çš„IPFS URIã€‚`Metadata URI`æ˜¾ç¤ºçš„IPFS URIæ˜¯æŒ‡å‘å‚¨å­˜åœ¨IPFSçš„JSONæ ¼å¼NFTå…ƒæ•°æ®ã€‚  

å¥½æ£’ï¼æˆ‘ä»¬åˆ›å»ºäº†å±äºè‡ªå·±çš„NFTï¼Œä½†æ˜¯å”¯æœ‰ä½ çš„IPFSèŠ‚ç‚¹ç»§ç»­è¿è¡Œï¼Œå…¶ä»–äººæ‰èƒ½è·å–ã€‚å¦‚æœä½ å…³é—­äº†ä½ çš„ç”µè„‘åˆæˆ–è€…å¤„äºç¦»çº¿çŠ¶æ€ï¼Œé‚£ä¹ˆæ²¡äººå¯ä»¥çœ‹å¾—åˆ°ä½ çš„NFTï¼æƒ³è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨ä¸€ä¸ªé”å®šæœåŠ¡æ¥é”å®šè¿™ä¸ªNFTã€‚

### é”å®šä½ çš„NFT

ä¸ºäº†ä¸24å°æ—¶å…¨å¤©å€™è¿è¡Œæœ¬åœ°IPFS daemonï¼Œä½†åˆåŒæ—¶ç¡®ä¿æ•°æ®çš„å¯ç”¨æ€§ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€‰æ‹©è¯·æ±‚è¿œç¨‹é”å®šæœåŠ¡åœ¨ä»–ä»¬çš„IPFSèŠ‚ç‚¹ä¸Šä¿å­˜ä¸€ä»½æˆ‘ä»¬çš„IPFSæ•°æ®ã€‚  

æ‰€æœ‰æ”¯æŒIPFSè¿œç¨‹é”å®šAPIçš„é”å®šæœåŠ¡éƒ½èƒ½æ­é…Mintyä½¿ç”¨ã€‚  

ä¸‹é¢æˆ‘ä»¬å°†æ¼”ç¤ºå¦‚ä½•å°†Mintyé…ç½®åˆ°ä¸¤ç§ä¸åŒçš„é”å®šæœåŠ¡ã€‚ä¸‹æ–¹çš„é”å®šæœåŠ¡å‡å¯ä»¥ä½¿ç”¨ï¼Œå› æ­¤ä½ åªéœ€æ³¨å†Œå…¶ä¸­ä¸€ä¸ªè¿›è¡Œå°è¯•å³å¯ã€‚ 

#### é€‰é¡¹1ï¼šPinata 

Pinataæ˜¯æœ€æ‚ ä¹…ä¸”æœ€å‡ºåçš„è¿œç¨‹é”å®šæœåŠ¡ï¼ŒåŠ ä¸Šå®ƒä»¬æœ‰æé«˜å…è´¹çš„å‚¨å­˜ç©ºé—´ï¼Œéå¸¸æ–¹ä¾¿æˆ‘ä»¬æ³¨å†Œåè¿›è¡Œå°è¯•ã€‚ 

##### æ³¨å†ŒPinata  

æƒ³è¦ä½¿ç”¨Pinataé”å®šä½ çš„æ•°æ®ï¼Œä½ å…ˆè¦æ³¨å†Œä¸€ä¸ªè´¦æˆ·ã€‚

1. å‰å¾€[pinata.cloud](https://pinata.cloud/)ã€‚

2. ç‚¹å‡»**æ³¨å†Œ**å¹¶ä¸”ä½¿ç”¨ä½ çš„ç”µé‚®åˆ›å»ºä¸€ä¸ªè´¦æˆ·ã€‚

Pinataä¼šç»™äºˆæ¯ä¸ªç”¨æˆ·1GBçš„å…è´¹å‚¨å­˜ç©ºé—´ï¼Œè¿™å¯¹äºå‚¨å­˜å‡ ä¸ªNFTsæ˜¯è¶³å¤Ÿçš„äº†ã€‚

##### è·å¾—APIå¯†é’¥

ä½ éœ€è¦ä»Pinataé‚£å„¿è·å¾—APIå¯†é’¥ã€‚è¿™ä¸ªAPIå¯†é’¥èƒ½è®©ä½ ç”¨Mintyå’Œä½ çš„Pinataè´¦æˆ·åšäº’åŠ¨ã€‚  

1. ç™»å½•Pinataï¼Œåœ¨èœå•é€‰æ‹©**API keys**ã€‚

2. ç‚¹å‡»**New Key**ã€‚

3. å±•å»¶**Pinning Services API**ï¼Œé€‰æ‹©æ‰€æœ‰**Pins**ä¸‹æ–¹çš„é€‰é¡¹ï¼š 

![Pinataçš„APIå¯†é’¥é€‰é¡¹](../å›¾åƒ/pinata-api-key-permission.png)  

4. Pinataä¼šç»™ä½  _API key_ ï¼Œ_API secret_ï¼Œå’Œ _JWT_ï¼š 

    ```
    API Key: 43537d17e88805007086
    API Secret: 492b24f041b9120cbf8e35a247fb686793231a3d89045f1046a4f5b2d2175082
    JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySW5mb3JtYXRpb24iOnsiaWQiOiJiZDQ3NjM1Ny1lYWRhLTQ1ZDUtYTVmNS1mM2EwZjRmZGZmYmEiLCJlbWFpbCI6InRhaWxzbm93QHByb3Rvbm1haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsInBpbl9wb2xpY3kiOnsicmVnaW9ucyI6W3siaWQiOiJGUkExIiwiZGVzaXJlZFJlcGxpY2F0aW9uQ291bnQiOjF9XSwidmVyc2lvbiI6MX0sIm1mYV9lbmFibGVkIjpmYWxzZX0sImF1dGhlbnRpY2F0aW9uVHlwZSI6InNjb3BlZEtleSIsInNjb3BlZEtleUtleSI6IjQzNTM3ZDE3ZTg4ODA1MDA3MDg2Iiwic2NvcGVkS2V5U2VjcmV0IjoiNDkyYjI0ZjA0MWI5MTIwY2JmOGUzNWEyNDdmYjY4Njc5MzIzMWEzZDg5MDQ1ZjEwNDZhNGY1YjJkMjE3NTA4MiIsImlhdCI6MTYxNjAxMzExNX0.xDV9-cPwDIQInuiB0M--XiJ8dQwwDYMch4gJbc6ogXs
    ```
    æˆ‘ä»¬åªéœ€è¦`JWT`ã€‚ç›®å‰ï¼Œä½ å¯ä»¥å¿½ç•¥`API Key`å’Œ`API Secret`ã€‚ 
    
5. å¤åˆ¶ `config/pinata.env.example`æ–‡ä»¶è‡³`config/.env`ï¼š 
   
   ```shell
   cp config/pinata.env.example config/.env
   ```
   
6. `config/.env`é‡Œå¤´ï¼Œåœ¨`PINNING_SERVICE_KEY`çš„åŒå¼•å·`"`ä¸­é—´æ·»åŠ ä½ çš„JWTï¼š 

    ```shell
    PINNING_SERVICE_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySW5mb3JtYXRpb24iOnsia..."
    ```

7. Mintyç°å·²æˆåŠŸé“¾æ¥ä½ çš„Pinataè´¦æˆ·ï¼Œå¹¶ä¸”å¯ä»¥é”å®šNFTæ•°æ®è‡³ä½ çš„è´¦æˆ·ä¸Šã€‚  

#### é€‰é¡¹2ï¼šnft.storage 

[nft.storage](https://nft.storage)æ˜¯ç”±Protocol Labsæ‰€æä¾›ï¼Œç”¨äºå­˜å‚¨å…¬å…±NFTæ•°æ®çš„æ–°æœåŠ¡ã€‚ç›®å‰ï¼Œå®ƒæ˜¯ä¸€ä¸ªå…è´¹çš„å…¬æµ‹ç‰ˆæœ¬ï¼Œå› æ­¤æ³¨å†Œå’Œè¯•ç”¨éƒ½éå¸¸å®¹æ˜“ã€‚ 

##### æ³¨å†Œnft.storage  

è¦ä½¿ç”¨nft.storageï¼Œä½ éœ€è¦æ³¨å†Œä¸€ä¸ªè´¦æˆ·ã€‚å¦‚æœä½ è¿˜æ²¡æœ‰GitHubè´¦æˆ·ï¼Œä½ ä¹Ÿéœ€è¦åˆ›å»ºä¸€ä¸ªç”¨äºç™»å½•ã€‚  

1. å‰å¾€[nft.storage](https://nft.storage)ã€‚

2. ç‚¹å‡»**æ³¨å†Œ**ï¼Œå¹¶ä¸”ä½¿ç”¨ä½ çš„Githubè´¦æˆ·è¿›è¡Œæ³¨å†Œã€‚  

##### è·å–APIå¯†é’¥ 

ä½ éœ€è¦ä»nft.storageè·å–APIå¯†é’¥ã€‚

1. ç™»å½•nft.storageï¼Œåœ¨èœå•ä¸Šé€‰æ‹©**Manage API Keys**ã€‚

2. ç‚¹å‡»**New Key**ã€‚ 

3. æ–°çš„å¯†é’¥å°†ä¼šæ˜¾ç¤ºï¼Œå¤åˆ¶å¯†é’¥ã€‚å¯†é’¥æ˜¯ä¸€ä¸² `ey...` å¼€å¤´çš„å­—ç¬¦ä¸²ã€‚ 

æˆ‘ä»¬éœ€è¦æŠŠAPIå¯†é’¥æ”¾å…¥ä¸€ä¸ªMintyèƒ½æ‰¾åˆ°çš„æ–‡ä»¶ã€‚

1. å¤åˆ¶ `config/nft.storage.env.example`æ–‡ä»¶è‡³`config/.env`ï¼š

    ```shell
    cp config/nft.storage.env.example config/.env
    ```

2. `config/.env`é‡Œå¤´ï¼Œåœ¨`PINNING_SERVICE_KEY`çš„åŒå¼•å·`"`ä¸­é—´æ·»åŠ ä½ çš„APIå¯†é’¥ï¼š 

    ```shell
    PINNING_SERVICE_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySW5mb3JtYXRpb24iOnsia..."
    ```

3. Mintyç°å·²æˆåŠŸé“¾æ¥ä½ çš„nft.storageè´¦æˆ·ï¼Œå¹¶ä¸”å¯ä»¥é”å®šNFTæ•°æ®è‡³ä½ çš„è´¦æˆ·ä¸Šã€‚ 

### éƒ¨ç½²åˆ°æµ‹è¯•ç½‘  

æŸ¥çœ‹[Hardhatçš„é…ç½®æ–‡æ¡£](https://hardhat.org/config/)ä»¥äº†è§£å¦‚ä½•é…ç½®JSON-RPCèŠ‚ç‚¹å¹¶å°†æ­¤åˆçº¦éƒ¨ç½²åˆ°æµ‹è¯•ç½‘ä¸Šã€‚å½“æˆ‘ä»¬å°†æ–°ç½‘ç»œæ·»åŠ åˆ°Hardhatçš„é…ç½®åï¼Œä½ å¯ä»¥åœ¨è¿è¡Œ `minty` å‘½ä»¤æ—¶é€šè¿‡å°†`HARDHAT_NETWORK` ç¯å¢ƒå˜é‡ï¼ˆenvironment variableï¼‰è®¾ç½®ä¸ºæ–°ç½‘ç»œçš„åç§°æ¥ä½¿ç”¨å®ƒã€‚æˆ–è€…ï¼Œä½ å¯ä»¥é€‰æ‹©æ›´æ”¹ `hardhat.config.js` ä¸­çš„ `defaultNetwork` ï¼Œé¦–é€‰ä½¿ç”¨æ–°ç½‘ç»œã€‚  

å°†æ­¤åˆçº¦éƒ¨ç½²åˆ°ä»¥å¤ªåŠä¸»ç½‘æ˜¯ä¸€ä¸ªä¸å¥½çš„å†³å®šï¼Œå› ä¸ºåˆçº¦æœ¬èº«ç¼ºä¹ä»»ä½•è®¿é—®æ§åˆ¶ã€‚å‚é˜…[Open Zeppelinçš„æ–‡ç« ](https://docs.openzeppelin.com/contracts/3.x/access-control)ï¼Œäº†è§£ä»€ä¹ˆæ˜¯è®¿é—®æ§åˆ¶ä»¥åŠæ‹¥æœ‰å®ƒçš„é‡è¦æ€§ã€‚

### Mintyçš„è¿è¡Œ 

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»é“¸é€ äº†NFTï¼ŒæŠŠå®ƒæ·»åŠ é“ç†ä»¥å¤ªåŠä¸»ç½‘ï¼Œä¹ŸæŠŠæ•°æ®æ·»åŠ åœ¨IPFSã€‚ç°åœ¨æˆ‘ä»¬æ¥çœ‹ä¸€çœ‹åˆçº¦åˆ°åº•åœ¨åšä»€ä¹ˆï¼Œå¹¶ä¸”äº†è§£ä¸ºä»€ä¹ˆå®ƒä»¬è¦æ€ä¹ˆåšã€‚æˆ‘ä»¬ä¹Ÿä¼šæ¢è®¨å…³äºIPFSæ–¹é¢çš„è¯é¢˜å’Œäº†è§£NFTæ•°æ®æ˜¯å¦‚ä½•æ‰˜ç®¡åœ¨IPFSã€‚  

#### Mintyæ™ºèƒ½åˆçº¦  

Mintyä½¿ç”¨ä»¥[Solidity](https://soliditylang.org)ç¼–å†™çš„æ™ºèƒ½åˆçº¦ï¼Œè¿™æ˜¯æœ€æµè¡Œçš„ä»¥å¤ªåŠå¼€å‘è¯­è¨€ã€‚åˆçº¦ä½¿ç”¨äº†[ERC-721 Ethereum NFTæ ‡å‡†][eip-721]ï¼Œç»§æ‰¿è‡ªéå¸¸æ–¹ä¾¿ä¸”åŠŸèƒ½é½å…¨çš„[OpenZeppelin ERC721çš„åŸºç¡€åˆçº¦](https://docs.openzeppelin.com/contracts/3. x/api/token/erc721#ERC721ï¼‰ã€‚  

å› ä¸ºOpenZeppelinçš„åŸºç¡€åˆçº¦æä¾›äº†éå¸¸å¤šçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œæ‰€ä»¥Mintyæ™ºèƒ½åˆçº¦çš„æ„é€ å…¶å®éå¸¸ç®€å•ï¼š  

```solidity
pragma solidity ^0.7.0;
import "hardhat/console.sol";
import "@openzeppelin/contracts/token/ERC721/ERC721.sol";
import "@openzeppelin/contracts/utils/Counters.sol";
contract Minty is ERC721 {
    using Counters for Counters.Counter;
    Counters.Counter private _tokenIds;
    constructor(string memory tokenName, string memory symbol) ERC721(tokenName, symbol) {
        _setBaseURI("ipfs://");
    }
    function mintToken(address owner, string memory metadataURI)
    public
    returns (uint256)
    {
        _tokenIds.increment();
        uint256 id = _tokenIds.current();
        _safeMint(owner, id);
        _setTokenURI(id, metadataURI);
        return id;
    }
}
```  

å¦‚æœä½ é˜…è¯»äº†[OpenZeppelin ERC721çš„æŒ‡å—](https://docs.openzeppelin.com/contracts/3.x/erc721)ï¼Œä½ ä¼šå‘ç°Mintyåˆçº¦æœ‰éå¸¸å¤šçš„ç›¸ä¼¼ä¹‹å¤„ã€‚`mintToken` å‡½æ•°åªæ˜¯ä¸€ä¸ªè®¡æ•°å™¨æ¥å‘è¡Œæ–°çš„ä»£å¸idã€‚å®ƒä¹Ÿä½¿ç”¨äº†åŸºæœ¬åˆçº¦æä¾›çš„ `_setTokenURI` å‡½æ•°å°†å…ƒæ•°æ®çš„URIä¸æ–°çš„ä»£å¸idè¿›è¡Œé“¾æ¥ã€‚  

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨æ„é€ å‡½æ•°ï¼ˆconstructorï¼‰ä¸­å°†åŸºç¡€URIçš„è®¾ç½®ä¸º `ipfs://`ã€‚å½“æˆ‘ä»¬åœ¨ `mintToken` å‡½æ•°ä¸­ä¸ºæ¯ä¸ªä»£å¸è®¾ç½®å…ƒæ•°æ®URIæ—¶ï¼Œæˆ‘ä»¬ä¸éœ€è¦å‚¨å­˜å‰ç¼€ï¼Œå› ä¸ºåŸºç¡€åˆçº¦çš„ `tokenURI` è®¿é—®å™¨å‡½æ•°ä¼šè‡ªåŠ¨å¥—åœ¨æ¯ä¸ªä»£å¸çš„URIå‰æ®µã€‚  

è¿˜æœ‰ä¸€æ ·äº‹æƒ…éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ­¤åˆåŒæ˜¯**è¿˜æœªå‡†å¤‡å¥½**çš„ã€‚å®ƒä¸åŒ…æ‹¬ä»»ä½•çš„[è®¿é—®æ§åˆ¶][docs-openzeppelin-access-control]ï¼Œæ— æ³•é™åˆ¶å“ªäº›è´¦æˆ·å¯ä»¥å‘¼å«`mintToken`å‡½æ•°ã€‚å¦‚æœä½ å†³å®šå¼€å‘åŸºäº Mintyçš„ç”Ÿäº§å¹³å°ï¼Œä½ éœ€è¦æ¢ç´¢å¯ç”¨çš„è®¿é—®æ§åˆ¶æ¨¡å¼å¹¶æ€è€ƒå“ªäº›é€‚ç”¨äºä½œä¸ºä½ å¹³å°çš„è®¿é—®æ¨¡å‹ã€‚    

#### éƒ¨ç½²åˆçº¦ 

åœ¨ä½ é“¸é€ æ–°çš„NFTä¹‹å‰ï¼Œä½ éœ€è¦å°†åˆçº¦éƒ¨ç½²åˆ°åŒºå—é“¾ç½‘ç»œä¸Šã€‚Mintyä½¿ç”¨äº†[HardHat](https://hardhat.org)æ¥ç®¡ç†åˆçº¦éƒ¨ç½²ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒMintyå°†ä¼šéƒ¨ç½²åˆ°[é…ç½®ä¸ºåœ¨ä½ ç”µè„‘localhostç½‘ç»œä¸Šè¿è¡Œ](https://hardhat.org/hardhat-network/#connecting-to-hardhat-network-from-wallets-and-other-software)çš„[HardHatå¼€å‘ç½‘ç»œ](https://hardhat.org/hardhat-network)çš„ä¸€ä¸ªå®ä¾‹ã€‚

æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ç¼–è¾‘minty repoä¸­çš„ `hardhat.config.js` æ–‡ä»¶ï¼Œå°†åˆçº¦éƒ¨ç½²åˆ°[Ethereumçš„æµ‹è¯•ç½‘ç»œ](https://ethereum.org/en/developers/docs/networks/)ã€‚è¯·å‚é˜…[HardHatçš„æ–‡æ¡£](https://hardhat.org/config/#json-rpc-based-networks) äº†è§£å¦‚ä½•é…ç½®HardHatï¼Œä»¥éƒ¨ç½²åˆ°è¿æ¥ç€æµ‹è¯•ç½‘çš„èŠ‚ç‚¹ï¼Œä¸è®ºæ˜¯åœ¨æœ¬åœ°è¿è¡Œæˆ–æ˜¯ç”±æä¾›å•†ï¼Œä¾‹å¦‚[Infura](https://infura.io)æ‰˜ç®¡çš„ã€‚å› ä¸ºéƒ¨ç½²åˆçº¦æ˜¯ä¼šæ¶ˆè€— `ETH` çš„ï¼Œä½ éœ€è¦ä¸ºä½ é€‰æ‹©çš„ç½‘ç»œè·å–ä¸€äº›æµ‹è¯•ç‰ˆæœ¬çš„ `ETH` å¹¶é…ç½®å¥½Hardhatä»¥ä½¿ç”¨æ­£ç¡®çš„é’±åŒ…ã€‚   

#### å‘¼å« `mintToken` æ™ºèƒ½åˆçº¦å‡½æ•°  

è®©æˆ‘ä»¬çœ‹çœ‹Mintyçš„Javascriptç¼–ç æ˜¯å¦‚ä½•å’Œæ™ºèƒ½åˆçº¦çš„ `mintToken` å‡½æ•°äº’åŠ¨çš„ã€‚è¿™è¿‡ç¨‹ä¼šåœ¨ `Minty` ç±»çš„ `mintToken`åŠŸèƒ½é‡Œï¼š  

```javascript
async mintToken(ownerAddress, metadataURI) {
  // The smart contract adds an ipfs:// prefix to all URIs, 
  // so make sure to remove it so it doesn't get added twice
  metadataURI = stripIpfsUriPrefix(metadataURI)
  // Call the mintToken smart contract function to issue a new token
  // to the given address. This returns a transaction object, but the 
  // transaction hasn't been confirmed yet, so it doesn't have our token id.
  const tx = await this.contract.mintToken(ownerAddress, metadataURI)
  // The OpenZeppelin base ERC721 contract emits a Transfer event 
  // when a token is issued. tx.wait() will wait until a block containing 
  // our transaction has been mined and confirmed. The transaction receipt 
  // contains events emitted while processing the transaction.
  const receipt = await tx.wait()
  for (const event of receipt.events) {
    if (event.event !== 'Transfer') {
        console.log('ignoring unknown event type ', event.event)
        continue
    }
    return event.args.tokenId.toString()
  }
  throw new Error('unable to get token id')
}
```   

ä½ å¯ä»¥çœ‹åˆ°çš„æ˜¯ï¼Œå‘¼å«æ™ºèƒ½åˆçº¦çš„å‡½æ•°å…¶å®å’Œå‘¼å«Javascriptçš„æ­£å¸¸å‡½æ•°æ˜¯ç±»ä¼¼çš„ï¼Œè¿™å°±è¦å½’åŠŸäº[ethers.jsæ™ºèƒ½åˆçº¦åº“äº†](https://docs.ethers.io/v5/)ã€‚ä½†æ˜¯ï¼Œç”±äº `mintToken`å‡½æ•°æ”¹å˜äº†åŒºå—é“¾çš„çŠ¶æ€ï¼Œå®ƒæ— æ³•ç›´æ¥è¿”è¿˜ä¸€ä¸ªç»“æœã€‚è¿™æ˜¯å› ä¸ºè¿™ä¸ªå‡½æ•°åˆ›é€ äº†ä¸€ä¸ªä»¥å¤ªåŠäº¤æ˜“ï¼Œæˆ‘ä»¬å¹¶ä¸çŸ¥é“è¿™ä¸ªåŒ…å«äº†æˆ‘ä»¬äº¤æ˜“çºªå½•çš„åŒºå—æ˜¯å¦ä¼šçœŸçš„è¢«æ‰“åŒ…å¹¶ä¸”é“¾æ¥åˆ°ä¸»é“¾ä¸Šã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯èƒ½æ²¡æœ‰æ”¯ä»˜è¶³å¤Ÿçš„äº¤æ˜“è´¹ç”¨ï¼ˆgasï¼‰ã€‚  

æƒ³è¦å¾—åˆ°æˆ‘ä»¬NFTæ–°çš„ä»£å¸idï¼Œæˆ‘ä»¬éœ€è¦å‘¼å« `tx.wait()`ï¼Œè¿™å°±ä¼šç­‰å¾…ï¼Œç›´åˆ°æˆ‘ä»¬çš„äº¤æ˜“çœŸçš„è¢«ç¡®å®šä¸‹æ¥ã€‚ä»£å¸idå°†ä¼šåŒ…è£¹åœ¨ `Transfer` çš„äº‹ä»¶ä¸­ï¼Œè€Œè¿™ä¸ªäº‹ä»¶æ˜¯å½“æ–°çš„ä»£å¸è¢«åˆ›é€ åæˆ–è€…è½¬ç»™æ–°çš„ä¸»äººæ—¶ï¼Œç”±åŸºç¡€åˆçº¦å‘å‡ºçš„ã€‚æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹ç”± `tx.wait()` è¿”è¿˜çš„äº¤æ˜“å•æ®ï¼Œä» `Transfer` äº‹ä»¶é‡Œè·å–ä»£å¸çš„idã€‚  

### æŠŠNFTæ•°æ®å‚¨å­˜åœ¨IPFS  

æ™ºèƒ½åˆçº¦çš„ `mintToken` å‡½æ•°éœ€è¦ä¸€ä¸ªIPFSå…ƒæ•°æ®çš„URIï¼Œé€šå¸¸ä»¥JSONæ ¼å¼æ¥æè¿°çš„NFTã€‚Mintyä½¿ç”¨äº†åœ¨EIP-721ä¸­æåˆ°çš„å…ƒæ•°æ®è§„æ ¼ï¼Œæ”¯æŒåƒä¸‹æ–¹ä¾‹å­çš„JSONæ ¼å¼ï¼š 

```json
{
    "name": "A name for this NFT",
    "description": "An in-depth description of the NFT",
    "image": "ipfs://bafybeidlkqhddsjrdue7y3dy27pu5d7ydyemcls4z24szlyik3we7vqvam/nft-image.png"
}
```  

ä»£å¸çš„NFTæ•°æ®çš„URIä¼šåœ¨ `image` è¿™æ ã€‚å½“ç„¶ï¼Œè¿™ä¸€æ å¹¶ä¸ä¸€å®šæ˜¯ä¸€ä¸ªå›¾åƒï¼Œå®ƒå¯ä»¥æ˜¯ä¸åŒçš„æ–‡ä»¶ç±»å‹ã€‚  

æƒ³è¦è·å–æ™ºèƒ½åˆçº¦çš„å…ƒæ•°æ®URIï¼Œæˆ‘ä»¬éœ€è¦æŠŠå›¾åƒæ·»åŠ åˆ°IPFSï¼Œä»¥ä¾¿è·å¾—IPFSçš„CIDï¼Œæ¥ç€å†ä½¿ç”¨è¿™ä¸ªCIDæ„å»ºä¸€ä¸ª `ipfs://` çš„URIã€‚ç„¶åæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªJSONç‰©å“ï¼ŒåŒ…å«äº†å›¾åƒURIå’Œç”¨æˆ·æé«˜çš„ `name` å’Œ `description`ã€‚æœ€åï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªJSONç‰©å“æ·»åŠ åˆ°IPFSï¼Œåˆ›å»ºå…ƒæ•°æ®çš„ `ipfs://` URIï¼Œå¹¶ä¸”æŠŠå®ƒæ·»åŠ åˆ°æˆ‘ä»¬çš„æ™ºèƒ½åˆçº¦ã€‚  

Mintyçš„ `createNFTFromAssetData`åŠŸèƒ½ä¼šè´Ÿè´£è¿™ä¸ªè¿‡ç¨‹ï¼Œå¹¶ä¸”ç”±å‡ ä¸ªå‡½æ•°å¸®å¿™ï¼š  

```javascript
async createNFTFromAssetData(content, options) {
  // add the asset to IPFS
  const filePath = options.path || 'asset.bin'
  const basename =  path.basename(filePath)
  // When you add an object to IPFS with a directory prefix in its path,
  // IPFS will create a directory structure for you. This is nice, because
  // it gives us URIs with descriptive filenames in them e.g.
  // 'ipfs://bafybeihhii26gwp4w7b7w7d57nuuqeexau4pnnhrmckikaukjuei2dl3fq/cat-pic.png' vs
  // 'ipfs://bafybeihhii26gwp4w7b7w7d57nuuqeexau4pnnhrmckikaukjuei2dl3fq'
  const ipfsPath = '/nft/' + basename
  const { cid: assetCid } = await this.ipfs.add({ path: ipfsPath, content })
  // make the NFT metadata JSON
  const assetURI = ensureIpfsUriPrefix(assetCid) + '/' + basename
  const metadata = await this.makeNFTMetadata(assetURI, options)
  // add the metadata to IPFS
  const { cid: metadataCid } = await this.ipfs.add({ 
    path: '/nft/metadata.json', 
    content: JSON.stringify(metadata)
  })
  const metadataURI = ensureIpfsUriPrefix(metadataCid) + '/metadata.json'
  // get the address of the token owner from options, 
  // or use the default signing address if no owner is given
  let ownerAddress = options.owner
  if (!ownerAddress) {
    ownerAddress = await this.defaultOwnerAddress()
  }
  // mint a new token referencing the metadata URI
  const tokenId = await this.mintToken(ownerAddress, metadataURI)
  // format and return the results
  return {
    tokenId,
    metadata,
    assetURI,
    metadataURI,
    assetGatewayURL: makeGatewayURL(assetURI),
    metadataGatewayURL: makeGatewayURL(metadataURI),
  }
}
```  

æˆ‘ä»¬ä½¿ç”¨å¸¦æœ‰ç›®å½•ç»“æ„çš„ `path` å‚æ•°å°†æˆ‘ä»¬çš„æ•°æ®æ·»åŠ åˆ°IPFSï¼Œä¾‹å¦‚ï¼Œ`/nft/metadata.json`ï¼Œè€Œä¸ä»…ä»…æ˜¯ `metadata.json`ã€‚ è™½ç„¶è¿™å¹¶ä¸æ˜¯å¿…è¦çš„ï¼Œä½†å®ƒä¸ºæˆ‘ä»¬æä¾›äº†æ›´å…·æè¿°æ€§çš„URIï¼Œå…¶ä¸­åŒ…æ‹¬äººç±»èƒ½è¯»æ‡‚çš„æ–‡ä»¶åã€‚ä¸å¥½çš„æ˜¯ï¼Œå…ƒæ•°æ®URIéœ€è¦æ›´å¤šçš„é“¾ä¸Šç©ºé—´ï¼Œå› ä¸ºå®ƒåŒ…æ‹¬ `/metadata.json` éƒ¨åˆ†ä»¥åŠIPFSçš„CIDã€‚åœ¨å­—èŠ‚æˆæœ¬è¾ƒé«˜çš„ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œä½ å¯èƒ½ä¼šæƒ³è¦ä¿®æ”¹æ™ºèƒ½åˆçº¦ï¼Œåªå­˜å‚¨CIDçš„éƒ¨åˆ†ï¼Œå¹¶åœ¨è¿”å›URIä¹‹å‰è‡ªåŠ¨é™„åŠ æ–‡ä»¶åï¼Œæˆ–è€…ä»…ä»…æ˜¯å­˜å‚¨å…ƒæ•°æ®è€Œæ— éœ€ç›®å½•çš„åŒ…è£…ã€‚






